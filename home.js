const dynamicData = {
  star: "â˜…",
  rating: "4.8 star rating",
  ratingContent: "awarded the top adaptogen blend in the world",
  headline: "Achieve your highest self.",
  productInfo: [
    {
      value: "10x",
      label: "concentration",
      classNameValue: "concentrationValue",
      classNameLabel: "concentrationLabel",
    },
    {
      value: "9",
      label: "powerful ingredients",
      classNameValue: "ingredientsValue",
      classNameLabel: "ingredientsLabel",
    },
    {
      value: "1000",
      value2: "mg",
      label: "of Adaptogens per dose",
      classNameValue: "adaptogensValue",
      classNameLabel: "adaptogensLabel",
    },
  ],
  adImage: "images/alcamiimage.png",

  offerarray: [
    "LASER FOCUS",
    "SUSTAINED ENERGY",
    "CLEAR MIND",
    "IMPROVED MOOD",
    "NO CAFFEINE",
    "CALM BALANCE",
  ],

  guaranteeList: [
    {
      heading: "30-day Guarantee",
      description: "Love Alcami or send it back",
      icon: "guaranteesection/heart.png",
    },
    {
      heading: "Worldwide Shipping",
      description: "Alcami ships everywhere",
      icon: "guaranteesection/globe.png",
    },
    {
      heading: "Fast Delivery",
      description: "On time quick shipping",
      icon: "guaranteesection/cube.png",
    },
    {
      heading: "Eco Certified",
      description: "Carbon neutral eco packaging",
      icon: "guaranteesection/eco.png",
    },
  ],

  companyIconNames: [
    "companyimages/fast.png",
    "companyimages/forb.png",
    "companyimages/goop.png",
    "companyimages/time.png",
    "companyimages/nytimes.png",
  ],

  elementsfeatures: [
    {
      name: "30 servings shipped monthly",
      icon: "correct.png",
    },
    {
      name: "<b>Free</b> Golden Kit Gold bottle + spoon (42$ value)",
      icon: "correct.png",
    },
    {
      name: "<b>Free</b> 60 days supply of Alcami Shilajit ($78 value)",
      icon: "correct.png",
    },
    {
      name: "<b>50% OFF</b> Shipping (Over $7-$10 in savings)",
      icon: "correct.png",
    },
    {
      name: "Pause or Cancel Anytime after 3 months minimum",
      icon: "correct.png",
    },
    {
      name: "90 Day Money Back Guarantee*",
      icon: "correct.png",
    },
  ],

  elementsfeaturesPreviewIcons: [
    "elementsleftprevimages4.png",
    "elementsleftprevimages3.png",
    "elementsleftprevimages2.png",
    "elementsleftpreviewimages.png",
    "matchasmaller.png",
    "matchasmallerbackside.png",
    "cacaosmaller.png",
    "cacaosmallbackside.png",
  ],

  productTypeList: [
    {
      name: "Non-GMO",
      icon: "producttype/nongmo.png",
    },
    {
      name: "Dairy Free",
      icon: "producttype/dairyfree.png",
    },
    {
      name: "Vegan",
      icon: "producttype/vegan.png",
    },
    {
      name: "Keto",
      icon: "producttype/keto.png",
    },
    {
      name: "GMP Certified",
      icon: "producttype/gmp.png",
    },
    {
      name: "NSF Certified",
      icon: "producttype/nsf.png",
    },
  ],

  shilajeetList: [
    {
      heading: "Boosts Energy and Stamina",
      description:
        "Shilajit enhances vitality, supporting increased energy levels, physical endurance, and overall stamina.",
      icon: "shilajit/energy.png",
    },
    {
      heading: "Enhances Bone and Men's Health",
      description:
        "Shilajit provides essential minerals for strong bones and has traditional uses in supporting men's reproductive health and testosterone levels",
      icon: "shilajit/bone.png",
    },
    {
      heading: "Promotes Cognitive Function & Stress Relief",
      description:
        "Shilajit may improve mental clarity, focus, and memory while helping the body adapt to stress, enhancing overall resilience.",
      icon: "shilajit/stress.png",
    },
    {
      heading: "Supports Immune Health & Anti-Aging",
      description:
        "Rich in antioxidants, Shilajit aids in reducing oxidative stress, boosting the immune system, and promoting skin health for a youthful appearance",
      icon: "shilajit/health.png",
    },
  ],

  morningritualList: [
    {
      heading: "Prep your favorite drink",
      description:
        "Start your morning with your favorite beverage, whether it's a nutrient-packed smoothie or a warm cup of tea.",
      number: "1",
    },
    {
      heading: "Take a scoop",
      description:
        "Simply add one potent scoop packed with x10 the potency to boost energy, enhance clarity, and support wellness all day.",
      number: "2",
    },
    {
      heading: "Customize and mix",
      description:
        "Personalize your morning drink. Stir well for a perfectly blended, nutrient-rich beverage that awakens your mind and prepares you for the day.",
      number: "3",
    },
  ],

  percentSection: [
    {
      description: "Reported increased energy throughout their day",
      number: "84%",
    },
    {
      description: "Reported feeling more focused",
      number: "78%",
    },
    {
      description: "Reported a sense of calmness & steady mood",
      number: "89%",
    },
    {
      description:
        "Reported feeling an overall increased wellness in their gut skin, hair, and physical health",
      number: "90%",
    },
  ],

  tableHeader: [
    {
      name: "BENEFITS",
    },
    {
      name: "alcamismaller.png",
      icon: "header.png",
    },
    {
      name: "MUD/WTR",
      icon: "table/tableheader1.png",
    },
    {
      name: "RYZE",
      icon: "table/tableheader2.png",
    },
    {
      name: "EVERYDAY DOSE",
      icon: "table/tableheader3.png",
    },
  ],

  tableContent: [
    {
      name: "Potency Concentration",
      value: "10x",
      value2: "1x",
      value3: "1x",
      value4: "4x",
    },
    {
      name: "Extracts Concentrates",
      value: "table/greenright.png",
      value2: "table/wrong.png",
      value3: "table/wrong.png",
      value4: "table/right.png",
    },
    {
      name: "Effects You Can Feel",
      value: "table/greenright.png",
      value2: "table/wrong.png",
      value3: "table/wrong.png",
      value4: "table/wrong.png",
    },
    {
      name: "# of Beneficial Ingredients",
      value: "9",
      value2: "5",
      value3: "6",
      value4: "2",
    },
    {
      name: "Incredible Taste",
      value: "table/greenright.png",
      value2: "table/wrong.png",
      value3: "table/wrong.png",
      value4: "table/wrong.png",
    },
    {
      name: "No Caffeine",
      value: "table/greenright.png",
      value2: "table/wrong.png",
      value3: "table/wrong.png",
      value4: "table/wrong.png",
    },
    {
      name: "No Starch or Myceliated Oats",
      value: "table/greenright.png",
      value2: "table/right.png",
      value3: "table/wrong.png",
      value4: "table/wrong.png",
    },
    {
      name: "100% Fruiting Body Mushroom",
      value: "table/greenright.png",
      value2: "table/right.png",
      value3: "table/wrong.png",
      value4: "table/right.png",
    },
  ],

  swiper: [
    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },
    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },

    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },

    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },
    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },

    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },
    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },
    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },
    {
      swiperstar: "swiperstars.png",
      swiperpara: `"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Consectetur adipiscing elit, sed do eiusmod "`,
      swiperimage: "slideruser.png",
      swipername: "Name Surname",
      swiperposition: "Position, Company name",
    },
  ],

  accordianQuestions: [
    {
      question: "If I subscribe can I cancel anytime?",
      answer: "Yes, you can cancel your subscription at any time. There are no long-term commitments or cancellation fees. Simply manage your subscription through your account settings.",
    },
    {
      question: "Can I take this at night?",
      answer: "It depends on the specific product. Some formulations are designed for daytime use, while others are better suited for nighttime. Please refer to the product's label or consult with a healthcare professional.",
    },
    {
      question: "Where are your ingredients sourced from?",
      answer: "We source our ingredients from reputable suppliers around the world, prioritizing organic and sustainable practices. We are committed to transparency and can provide specific sourcing information upon request.",
    },
    {
      question: "Will this get me high?",
      answer: "No, our products are formulated without psychoactive substances like THC. They are designed to provide natural support without any intoxicating effects.",
    },
    {
      question: "Are you using fruiting bodies for your mushrooms?",
      answer: "Yes, we primarily use fruiting bodies for our mushroom extracts. Fruiting bodies contain a higher concentration of beneficial compounds, ensuring a more potent and effective product.",
    },
  ],
};

function renderDynamicData() {

  
  document.querySelector(
    ".rating"
  ).innerHTML = `<div class="rating-container"><span class="homepage-star">${dynamicData.star}</span><div class="rating-value">${dynamicData.rating}</div></div>${dynamicData.ratingContent}`;
  document.querySelector(".achieve").textContent = dynamicData.headline;

  const productInfoHTML = dynamicData.productInfo
    .map((item) => {
      let valueContent = item.value;
      if (item.value === "1000" && item.value2) {
        valueContent = `<p class="thousand">${item.value}</p><p class="mg">${item.value2}</p>`;
      }

      return `
      <div class="info-item">
          <span class="value ${item.classNameValue}">${valueContent}</span>
          <span class="label ${item.classNameLabel}">${item.label}</span>
      </div>
  `;
    })
    .join("");

  document.querySelector(".product-info").innerHTML = productInfoHTML;

  document.querySelector(".adImage").src = dynamicData.adImage;

  document.querySelector(".offer-list").innerHTML = dynamicData.offerarray
    .map((item) => {
      return `<div class="offer-list-item">${item}</div>`;
    })
    .join("");

  //   guarantee list
  document.querySelector(".guarantee-list").innerHTML =
    dynamicData.guaranteeList
      .map((item) => {
        return `<div class="guarantee-list-item">
    <img src="${item.icon}" alt=""/>
    <div class="guarantee-item-column">
    <p class="guarantee-item-heading">${item.heading}</p><p class="guarantee-item-description">${item.description}</p>
    </div>
    </div>`;
      })
      .join("");

  //   company images list
  document.querySelector(".company-images-list").innerHTML =
    dynamicData.companyIconNames
      .map((item) => {
        return `<img src="${item}" alt=""/>`;
      })
      .join("");

  //first slider section
  document.querySelector(".product-features").innerHTML =
    dynamicData.elementsfeatures
      .map((item) => {
        return `<div class="element-features-wrapper">
        <img src="images/${item.icon}" alt=""/>

    <p>${item.name}</p>
    </div>`;
      })
      .join("");

  document.querySelector(".slider-image-preview").innerHTML =
    dynamicData.elementsfeaturesPreviewIcons
      .map((item) => {
        return `
      <img src="images/${item}" alt=""/>
      `;
      })
      .join("");

  //   product type section
  document.querySelector(".product-type-section").innerHTML =
    dynamicData.productTypeList
      .map((item) => {
        return `<div class="product-type-item">
        <img src="${item.icon}" alt=""/>

    <p>${item.name}</p>
    </div>`;
      })
      .join("");

  //   shilajit section
  document.querySelector(".shilajit-card-wrapper").innerHTML =
    dynamicData.shilajeetList
      .map((item) => {
        return `<div class="shilajeet-list-item">
  <img src="${item.icon}" alt=""/>
  <div class="shilajeet-item-column">
  <p class="shilajeet-item-column-heading">${item.heading}</p><p class="shilajeet-item-column-description">${item.description}</p>
  </div>
  </div>`;
      })
      .join("");

  // morning ritual section
  document.querySelector(".morning-ritual-list").innerHTML =
    dynamicData.morningritualList
      .map((item) => {
        return `<div class="morningritual-list-item">
<div class="morningritual-number">${item.number}</div>    <div class="morningritual-item-column">
    <p class="ritualstep-heading">${item.heading}</p><p class="ritualstep-description">${item.description}</p>
    </div>
    </div>`;
      })
      .join("");

  //   percent section
  document.querySelector(".percent-section-content").innerHTML =
    dynamicData.percentSection
      .map((item) => {
        return `<div class="percent-item-column">
    <p class="percent-number">${item.number}</p><p class="percent-number-description">${item.description}</p>
    </div>`;
      })
      .join("");

  // table section
  document.querySelector(".productivity-table-header").innerHTML =
    dynamicData.tableHeader
      .map((item) => {
        let valueContent = `<td class="productivity-table-header-data"><img src="${item.icon}" class="table-header-image"/><p class="table-description-para">${item.name}</p></td>`;
        if (item.name === "BENEFITS") {
          valueContent = `<th class="productivity-table-header-heading">${item.name}</td>`;
        }
        if (item.name === "alcamismaller.png") {
          valueContent = `<td class="productivity-table-header-data"><img src="images/${item.name}" class="table-header-alcemi-image"/><img src="${item.icon}" class="table-header-alcemiicon-image"/></td>`;
        }

        return valueContent;
      })
      .join("");

  // table content
  document.querySelector(".productivity-table-row").innerHTML =
    dynamicData.tableContent
      .map((item) => {
        let tableContent = `<tr class="table-image-wrapper"><td class="table-image-row-data-title">${item.name}</td>
  <td class="table-image-row-data">  <img src="${item.value}" alt=""/>
  </td><td class="table-image-row-data">  <img src="${item.value2}" alt=""/>
  </td><td class="table-image-row-data">  <img src="${item.value3}" alt=""/>
  </td><td class="table-image-row-data">  <img src="${item.value4}" alt=""/>
  </td></tr>`;
        if (
          item.name === "Potency Concentration" ||
          item.name === "# of Beneficial Ingredients"
        ) {
          tableContent = `<tr class="table-content-wrapper"><td class="table-content-row-data-title">${item.name}</td>
    <td class="table-content-row-data">${item.value}</td><td class="table-content-row-data">${item.value2}</td><td class="table-content-row-data">${item.value3}</td><td class="table-content-row-data">${item.value4}</td></tr>`;
        }
        return tableContent;
      })
      .join("");

  //slider

  document.querySelector(".swiper-wrapper").innerHTML = dynamicData.swiper
    .map((item) => {
      return `<div class="swiper-card">
<img class="swiper-star" src="images/${item.swiperstar}"/>      <p class="swiper-content">${item.swiperpara}</p>
      <div class="swiper-content-wrapper">
      <img src="images/${item.swiperimage}"/>
      <div class="swiper-column">
      <p>${item.swipername}</p>

      <p>${item.swiperposition}</p>

      </div>
      </div>

      </div>`;
    })
    .join("");

    
  //accordian-questions

  // document.querySelector(".questions-accordian-list").innerHTML =
  //   dynamicData.accordianQuestions
  //     .map((item) => {
  //       return `<div class="questions-item-column">
      
  //       <div class="questions-item-questions">${item.question}
  //       <img src="images/plusicon.png" class="plus-icon"/>
  //       </div>
      
  //     <p>${item.answer}</p>
  //     </div>`;
  //     })
  //     .join("");

  const questionsList = document.querySelector(".questions-accordian-list");

  questionsList.innerHTML = dynamicData.accordianQuestions
    .map((item) => {
      return `<div class="questions-item-column">
        <div class="questions-item-questions">${item.question}
          <img src="images/plusicon.png" class="plus-icon"/>
        </div>
        <p>${item.answer}</p>
      </div>`;
    })
    .join("");

  questionsList.addEventListener("click", (event) => {
    const questionItem = event.target.closest(".questions-item-column");
    if (questionItem) {
      questionItem.classList.toggle("open");
    }
  });


}

function checkElementsAndRender() {
  if (
    document.querySelector(".rating") &&
    document.querySelector(".achieve") &&
    document.querySelector(".product-info") &&
    document.querySelector(".adImage")
  ) {
    clearInterval(checkInterval);
    renderDynamicData();

    function animateNumbers() {
      const percentItems = document.querySelectorAll('.percent-item-column');
    
      percentItems.forEach((item) => {
        const numberElement = item.querySelector('.percent-number');
        const targetNumber = parseInt(numberElement.textContent);
        numberElement.textContent = '0%';
    
        let currentNumber = 0;
        const increment = Math.ceil(targetNumber / 200);
    
        function updateNumber() {
          currentNumber += increment;
          if (currentNumber <= targetNumber) {
            numberElement.textContent = currentNumber + '%';
            requestAnimationFrame(updateNumber);
          } else {
            numberElement.textContent = targetNumber + '%';
          }
        }
    
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              updateNumber();
              observer.disconnect();
            }
          });
        });
    
        observer.observe(item);
      });
    }
    
        animateNumbers();


//  first slider    
const flavorImage = document.getElementById('flavor-image');
const flavorOptions = document.querySelectorAll('.flavor-choose-options');
const sliderLeftButton = document.querySelector('.slider-image-section img[src="images/sliderleftbutton.png"]');
const sliderRightButton = document.querySelector('.slider-image-section img[src="images/sliderrightbutton.png"]');
const sliderImageSection = document.querySelector('.slider-image-section');
const addToCartButton = document.querySelector('.add-to-cart-button');

const flavors = [
    { name: 'original', image: 'images/alcamioriginallarge.png' },
    { name: 'matcha', image: 'images/elementssliderimg2.webp' },
    { name: 'cacao', image: 'images/elementssliderimage3.webp' }
];

const cartLinks = {
    original: {
        single: '/cart/add-original-single',
        double: '/cart/add-original-double',
        try: '/cart/add-original-try'
    },
    matcha: {
        single: '/cart/add-matcha-single',
        double: '/cart/add-matcha-double',
        try: '/cart/add-matcha-try'
    },
    cacao: {
        single: '/cart/add-cacao-single',
        double: '/cart/add-cacao-double',
        try: '/cart/add-cacao-try'
    }
};

let currentIndex = 0;
let currentSubscription = 'single';

const dotsContainer = document.createElement('div');
dotsContainer.className = 'slider-dots';
sliderImageSection.appendChild(dotsContainer);

flavors.forEach((_, index) => {
    const dot = document.createElement('span');
    dot.className = 'slider-dot';
    dot.dataset.index = index;
    dotsContainer.appendChild(dot);
});

const dots = document.querySelectorAll('.slider-dot');

function updateAddToCartLink() {
    const currentFlavor = flavors[currentIndex].name;
    const link = cartLinks[currentFlavor][currentSubscription];
    addToCartButton.onclick = function() {
      window.open(link, '_blank');
    };
}

function updateSlider() {
    flavorImage.src = flavors[currentIndex].image;
    
    updateSelection(flavors[currentIndex].name);
    
    dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentIndex);
    });
    
    updateAddToCartLink();
}

function updateSelection(flavorName) {
    flavorOptions.forEach(option => {
        option.classList.remove('selected');
        
        const radioButton = option.querySelector('.flavor-input');
        if (radioButton) {
            radioButton.checked = false;
        }
    });

    flavorOptions.forEach(option => {
        const label = option.querySelector('.flavor-label');
        if (label && label.textContent.trim().toLowerCase() === flavorName) {
            option.classList.add('selected');
            const radioButton = option.querySelector('.flavor-input');
            if (radioButton) {
                radioButton.checked = true;
            }
        }
    });
}

function slideTo(index) {
    currentIndex = index;
    updateSlider();
}

function slide(direction) {
    if (direction === 'left') {
        currentIndex = (currentIndex - 1 + flavors.length) % flavors.length;
    } else {
        currentIndex = (currentIndex + 1) % flavors.length;
    }
    updateSlider();
}

function handleSubscriptionChange(event) {
    const selectedRadio = event.target;
    
    const subscriptionWrapper = selectedRadio.closest('label');
    
    if (subscriptionWrapper.classList.contains('most-popular-label')) {
        currentSubscription = 'single';
    } else if (subscriptionWrapper.textContent.includes('Double Kit')) {
        currentSubscription = 'double';
    } else if (subscriptionWrapper.textContent.includes('Try Once')) {
        currentSubscription = 'try';
    }
    
    document.querySelectorAll('.most-popular-label-radio-input').forEach(radio => {
        radio.checked = false;
    });
    selectedRadio.checked = true;
    
    updateAddToCartLink();
}

sliderLeftButton.addEventListener('click', () => slide('left'));
sliderRightButton.addEventListener('click', () => slide('right'));

dots.forEach(dot => {
    dot.addEventListener('click', () => {
        slideTo(parseInt(dot.dataset.index));
    });
});

document.querySelectorAll('.most-popular-label-radio-input').forEach(radio => {
    radio.addEventListener('change', handleSubscriptionChange);
});

function handleFlavorClick(event) {
    const flavorLabel = event.target.closest('.flavor-choose-options').querySelector('.flavor-label');
    const selectedFlavor = flavorLabel.textContent.trim().toLowerCase();
    currentIndex = flavors.findIndex(flavor => flavor.name === selectedFlavor);
    updateSlider();
}

flavorOptions.forEach(option => {
    option.addEventListener('click', handleFlavorClick);
});

function setDefaultSelection() {
    currentIndex = 0;
    
    const singleKitRadio = document.querySelector('.most-popular-label .most-popular-label-radio-input');
    if (singleKitRadio) {
        singleKitRadio.checked = true;
    }
    currentSubscription = 'single';
    
    updateSlider();
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', setDefaultSelection);
} else {
    setDefaultSelection();
}



  }
  
}

const checkInterval = setInterval(checkElementsAndRender, 100);
